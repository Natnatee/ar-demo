<!DOCTYPE html>
<html lang="th">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AR Assets Admin</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        background-color: #f8f9fa;
      }
      .container {
        margin-top: 30px;
        padding: 15px;
      }
      .card {
        margin-bottom: 20px;
        border-radius: 8px;
      }
      .table {
        font-size: 0.9rem;
      }
      .form-control,
      .form-select {
        font-size: 0.9rem;
      }
      .btn-sm {
        font-size: 0.85rem;
      }
      .file-drop-area {
        border: 2px dashed #ccc;
        padding: 20px;
        text-align: center;
        cursor: pointer;
        background-color: #fff;
        border-radius: 8px;
      }
      .file-drop-area.dragover {
        background-color: #e9ecef;
      }
      @media (max-width: 576px) {
        .container {
          padding: 10px;
        }
        .table {
          font-size: 0.8rem;
        }
        .btn {
          width: 100%;
          margin-bottom: 10px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1 class="mb-4">จัดการ AR Assets</h1>

      <!-- Form for Create/Update AR Assets -->
      <div class="card">
        <div class="card-header">
          <h2 class="h5">เพิ่ม/แก้ไข Asset</h2>
        </div>
        <div class="card-body">
          <form id="asset-form">
            <input type="hidden" id="asset-id" />
            <div class="mb-3">
              <label for="asset-name" class="form-label">ชื่อ Asset</label>
              <input
                type="text"
                class="form-control"
                id="asset-name"
                required
              />
            </div>
            <div class="mb-3">
              <label for="asset-file" class="form-label">อัปโหลดไฟล์</label>
              <div class="file-drop-area" id="file-drop-area">
                <p>
                  ลากและวางไฟล์ที่นี่ หรือคลิกเพื่อเลือกไฟล์<br />(รองรับเฉพาะ
                  .mp4, .jpg, .jpeg, .png, .mind, .gltf)
                </p>
                <input
                  type="file"
                  id="asset-file"
                  accept=".mp4,.jpg,.jpeg,.png,.mind,.gltf"
                  hidden
                />
              </div>
              <p id="file-name" class="mt-2"></p>
            </div>
            <button type="submit" class="btn btn-primary">บันทึก</button>
            <button type="button" class="btn btn-secondary" id="reset-form">
              รีเซ็ต
            </button>
            <p class="mt-3" id="status-message"></p>
          </form>
        </div>
      </div>

      <!-- Assets Table -->
      <div class="card">
        <div class="card-header">
          <h2 class="h5">รายการ AR Assets</h2>
        </div>
        <div class="card-body">
          <table class="table table-striped table-hover" id="ar-assets-table">
            <thead>
              <tr>
                <th>ชื่อ</th>
                <th>ประเภท</th>
                <th>URL</th>
                <th>การจัดการ</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>

      <!-- Update ARData Form -->
      <div class="card">
        <div class="card-header">
          <h2 class="h5">อัปเดต AR Data</h2>
        </div>
        <div class="card-body">
          <form id="ar-data-form">
            <input
              type="hidden"
              id="ar-data-id"
              value="4dce27a0-486c-4d87-a0b7-7c6b66dd210e"
            />
            <div class="mb-3">
              <label for="mind-file-select" class="form-label">Mind File</label>
              <select class="form-select" id="mind-file-select" required>
                <option value="">เลือก Mind File</option>
              </select>
            </div>
            <div id="image-tracking-container">
              <label class="form-label">Image Tracking Targets</label>
              <div class="mb-3" id="target-fields">
                <!-- Dynamic fields will be added here -->
              </div>
              <button
                type="button"
                class="btn btn-secondary mb-3"
                id="add-target"
              >
                เพิ่ม Target
              </button>
            </div>
            <button type="submit" class="btn btn-primary">อัปเดต</button>
            <p class="mt-3" id="ar-data-status"></p>
          </form>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="./src/admin.js"></script>
    <script src="./src/admin2.js"></script>
  </body>
</html>
